---
import { getCollection } from "astro:content";
import { capitalize } from "@/lib/utils";
import CollectionLayout from "@/layouts/CollectionLayout.astro";
import tags from "@/config/tags.json";

export async function getStaticPaths() {
  return tags.map((tag) => ({
    params: {
      tag,
    },
  }));
}

const { tag } = Astro.params;
const entries = await getCollection("collection", ({ data }) => {
  return data.tags.includes(tag);
});
---

<CollectionLayout posts={entries} title={capitalize(tag)} />
